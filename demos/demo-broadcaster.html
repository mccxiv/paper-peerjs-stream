<!DOCTYPE html>
<html>
	<head>
		<script src="../../webcomponentsjs/webcomponents.js"></script>
		<link rel="import" href="../../paper-peerjs-stream/paper-peerjs-stream.html">
	</head>
	<body>
		<!-- Listens for call requests and responds to them with a local stream -->
		<paper-peerjs-stream broadcasts self="broadcaster" host="peerjs.wiff.me" active></paper-peerjs-stream>

		<script>

			// Provide a stream for the broadcaster to broadcast
			navigator.getUserMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia);
			var e = document.querySelector('paper-peerjs-stream');
			var constraints = {video: true, audio: true};

			navigator.getUserMedia (constraints, success, failure);

			function success(stream) {
				e.setStream(stream);
			}

			function failure(err) {
				console.log("The following error occured: " + err);
			}
		</script>
	</body>
</html>